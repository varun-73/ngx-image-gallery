{"version":3,"sources":["ng://ngx-image-gallery/lib/components/ngx-image-gallery/ngx-image-gallery.component.ts","ng://ngx-image-gallery/lib/directives/click-outside.directive.ts","ng://ngx-image-gallery/lib/directives/mousewheel.directive.ts","ng://ngx-image-gallery/lib/index.ts"],"names":["KEY_CODES","37","39","27","DEFAULT_CONF","imageBorderRadius","imageOffset","imagePointer","showDeleteControl","showCloseControl","showExtUrlControl","showImageTitle","showThumbnails","closeOnEsc","reactToKeyboard","reactToMouseWheel","reactToRightClick","thumbnailSize","backdropColor","inline","showArrows","NgxImageGalleryComponent","sanitizer","galleryElem","renderer","cdRef","_this","this","opened","conf","images","onOpen","EventEmitter","onClose","onDelete","onImageChange","onImageClicked","onError","loading","activeImageIndex","thumbnailMargin","thumbnailsScrollerLeftMargin","fitThumbnails","debounce","thumbnailParams","thumbnailsRenderParams","newThumbnailMargin","debouncedPrev","prev","leading","trailing","debouncedNext","next","Object","defineProperty","prototype","length","thumbnailsContainerWidth","thumbnailsElem","nativeElement","offsetWidth","thumbnailsInView","Math","floor","newThumbnailSize","outThumbnails","setGalleryConf","assign","loadImage","index","galleryImage","_cached","Promise","resolve","reject","image","Image","src","url","onload","onerror","error","activateImage","imageIndex","emit","then","_imageIndex","detectChanges","setTimeout","scrollThumbnails","catch","console","warn","ngOnInit","setStyle","addClass","open","ngOnChanges","changes","firstChange","currentValue","previousValue","onKeyboardInput","event","keyCode","close","onWindowResize","onFirstImage","onLastImage","setActiveImage","deleteImage","mouseWheelUp","mouseWheelDown","clickOnImage","rightClickOnImage","stopPropagation","DomSanitizer","ElementRef","Renderer2","ChangeDetectorRef","__decorate","HostBinding","Input","Output","ViewChild","HostListener","tslib","Component","selector","template","ClickOutsideDirective","_elementRef","clickOutside","onClick","$event","targetElement","contains","Directive","MouseWheelDirective","onMouseWheelChrome","mouseWheelFunc","onMouseWheelFirefox","onMouseWheelIE","window","delta","max","min","wheelDelta","detail","returnValue","preventDefault","NgxImageGalleryModule","NgModule","imports","CommonModule","declarations","exports"],"mappings":"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","sourcesContent":["import {\n    Component,\n    OnInit,\n    HostBinding,\n    Input,\n    HostListener,\n    ElementRef,\n    Renderer2,\n    EventEmitter,\n    Output,\n    OnChanges,\n    SimpleChanges,\n    ViewChild,\n    ChangeDetectorRef\n} from '@angular/core';\n\nimport {assign, debounce} from 'lodash';\n\nimport {GALLERY_CONF, GALLERY_IMAGE} from '../../ngx-image-gallery.conf';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n// key codes to react\nconst KEY_CODES = {\n    37: 'LEFT',\n    39: 'RIGHT',\n    27: 'ESC'\n};\n\n// default gallery configuration\nconst DEFAULT_CONF: GALLERY_CONF = {\n    imageBorderRadius: '3px',\n    imageOffset: '20px',\n    imagePointer: false,\n    showDeleteControl: false,\n    showCloseControl: true,\n    showExtUrlControl: true,\n    showImageTitle: true,\n    showThumbnails: true,\n    closeOnEsc: true,\n    reactToKeyboard: true,\n    reactToMouseWheel: true,\n    reactToRightClick: false,\n    thumbnailSize: 30,\n    backdropColor: 'rgba(13,13,14,0.85)',\n    inline: false,\n    showArrows: true\n};\n\n@Component({\n    selector: 'ngx-image-gallery',\n    templateUrl: './ngx-image-gallery.component.html',\n    styleUrls: ['./ngx-image-gallery.component.scss']\n})\nexport class NgxImageGalleryComponent implements OnInit, OnChanges {\n\n    // gallery opened memory\n    @HostBinding('class.active') opened: boolean = false;\n\n    // gallery configuration\n    @Input() conf: GALLERY_CONF = {};\n\n    // gallery images\n    @Input() images: GALLERY_IMAGE[] = [];\n\n    // event emmiters\n    @Output() onOpen = new EventEmitter();\n    @Output() onClose = new EventEmitter();\n    @Output() onDelete = new EventEmitter();\n    @Output() onImageChange = new EventEmitter();\n    @Output() onImageClicked = new EventEmitter();\n    @Output() onError = new EventEmitter();\n\n    // thumbnails container\n    @ViewChild('thumbnails') thumbnailsElem: ElementRef;\n\n    /***************************************************/\n\n    // loading animation memory\n    loading: boolean = false;\n\n    // current active image index\n    activeImageIndex: number = null;\n\n    // thumbnail margin and scroll position\n    thumbnailMargin: string = '0px 8px';\n    thumbnailsScrollerLeftMargin: string = '0px';\n\n    // active image\n    get activeImage(): GALLERY_IMAGE {\n        return this.images[this.activeImageIndex];\n    }\n\n    // if gallery is on : first image\n    get onFirstImage(): boolean {\n        return this.activeImageIndex == 0;\n    }\n\n    // if gallery is on : last image\n    get onLastImage(): boolean {\n        return this.activeImageIndex == (this.images.length - 1);\n    }\n\n    // get thumbnails viewport rendering parameters\n    get thumbnailsRenderParams(): { thumbnailsInView: number, newThumbnailMargin: number, newThumbnailSize: number, thumbnailsScrollerLeftMargin: any } {\n        let thumbnailsContainerWidth = this.thumbnailsElem.nativeElement.offsetWidth;\n\n        let thumbnailMargin = 16;\n        let thumbnailSize = thumbnailMargin + this.conf.thumbnailSize;\n        let thumbnailsInView = Math.floor(thumbnailsContainerWidth / thumbnailSize);\n        let extraSpaceInThumbnailsContainer = thumbnailsContainerWidth - (thumbnailsInView * thumbnailSize);\n        let extraMargin = extraSpaceInThumbnailsContainer / thumbnailsInView;\n\n        let newThumbnailMargin = thumbnailMargin + extraMargin;\n        let newThumbnailSize = newThumbnailMargin + this.conf.thumbnailSize;\n\n        let relativePositionOfActiveImageThumbnailToScroller = thumbnailsInView - (thumbnailsInView - this.activeImageIndex);\n        let thumbnailsScrollerLeftMargin: any;\n\n        if (relativePositionOfActiveImageThumbnailToScroller > thumbnailsInView - 2) {\n            var outThumbnails = ((this.activeImageIndex + 1) - thumbnailsInView) + 1;\n\n            if (this.activeImageIndex != (this.images.length - 1)) {\n                thumbnailsScrollerLeftMargin = '-' + (newThumbnailSize * outThumbnails) + 'px';\n            }\n            else {\n                thumbnailsScrollerLeftMargin = '-' + (newThumbnailSize * (outThumbnails - 1)) + 'px';\n            }\n        } else {\n            thumbnailsScrollerLeftMargin = '0px';\n        }\n\n        return {\n            thumbnailsInView,\n            newThumbnailMargin,\n            newThumbnailSize,\n            thumbnailsScrollerLeftMargin\n        };\n    }\n\n    // set gallery configuration\n    private setGalleryConf(conf: GALLERY_CONF) {\n        this.conf = assign(DEFAULT_CONF, conf);\n    }\n\n    // load image and return promise\n    private loadImage(index: number): Promise<any> {\n        const galleryImage: GALLERY_IMAGE = this.images[index];\n\n        // check if image is cached\n        if (galleryImage._cached) {\n            return Promise.resolve(index);\n        }\n        else {\n            return new Promise((resolve, reject) => {\n                this.loading = true;\n\n                let image = new Image();\n                image.src = galleryImage.url;\n\n                image.onload = () => {\n                    this.loading = false;\n                    galleryImage._cached = true;\n                    resolve(index);\n                };\n\n                image.onerror = (error) => {\n                    this.loading = false;\n                    reject(error);\n                };\n            });\n        }\n    }\n\n    // activate image (set active image)\n    private activateImage(imageIndex: number) {\n        // prevent loading if already loading\n        if (this.loading) return false;\n\n        // emit event\n        this.onImageChange.emit(imageIndex);\n\n        this.loadImage(imageIndex)\n            .then(_imageIndex => {\n                this.activeImageIndex = _imageIndex;\n                // Trigger change detection manually to support ChangeDetectionStrategy.OnPush\n                this.cdRef.detectChanges();\n\n                // scroll thumbnails\n                setTimeout(() => {\n                    this.fitThumbnails();\n                    setTimeout(() => this.scrollThumbnails(), 300);\n                });\n            })\n            .catch(error => {\n                console.warn(error)\n                this.onError.next(error);\n            });\n    }\n\n    // adjust thumbnail margin to perfectly fit viewport\n    private fitThumbnails = debounce(() => {\n        // if thumbnails not visible, return false\n        if (this.conf.showThumbnails == false) return false;\n\n        let thumbnailParams = this.thumbnailsRenderParams;\n        this.thumbnailMargin = '0 ' + (thumbnailParams.newThumbnailMargin / 2) + 'px';\n    }, 300);\n\n    // scroll thumbnails to perfectly position active image thumbnail in viewport\n    private scrollThumbnails() {\n        // if thumbnails not visible, return false\n        if (this.conf.showThumbnails == false) return false;\n\n        let thumbnailParams = this.thumbnailsRenderParams;\n        this.thumbnailsScrollerLeftMargin = thumbnailParams.thumbnailsScrollerLeftMargin;\n    }\n\n    // debounced prev\n    private debouncedPrev = debounce(() => this.prev(), 100, {'leading': true, 'trailing': false});\n\n    // debounced next\n    private debouncedNext = debounce(() => this.next(), 100, {'leading': true, 'trailing': false});\n\n    /***************************************************/\n\n    constructor(\n        public sanitizer: DomSanitizer,\n        private galleryElem: ElementRef,\n        private renderer: Renderer2,\n        private cdRef: ChangeDetectorRef\n    ) {}\n\n    ngOnInit() {\n        // create final gallery configuration\n        this.setGalleryConf(this.conf);\n\n        // apply backdrop color\n        this.renderer.setStyle(this.galleryElem.nativeElement, 'background-color', this.conf.backdropColor);\n\n        // gallery inline class and auto open\n        if (this.conf.inline) {\n            this.renderer.addClass(this.galleryElem.nativeElement, 'inline');\n            this.open(0);\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        // when gallery configuration changes\n        if (changes.conf && changes.conf.firstChange == false) {\n            this.setGalleryConf(changes.conf.currentValue);\n\n            // apply backdrop color\n            this.renderer.setStyle(this.galleryElem.nativeElement, 'background-color', this.conf.backdropColor);\n\n            // gallery inline class and auto open\n            if ((changes.conf.previousValue.inline != true) && this.conf.inline) {\n                this.renderer.addClass(this.galleryElem.nativeElement, 'inline');\n                this.open(0);\n            }\n        }\n\n        // when gallery images changes\n        if (changes.images && changes.images.firstChange == false) {\n            this.images = changes.images.currentValue;\n\n            if (this.images.length) {\n                this.activateImage(0);\n            }\n        }\n\n    }\n\n    // keyboard event\n    @HostListener('window:keydown', ['$event'])\n    public onKeyboardInput(event: KeyboardEvent) {\n        if (this.conf.reactToKeyboard && this.opened && !this.loading) {\n            if (KEY_CODES[event.keyCode] == 'RIGHT') {\n                this.next();\n            }\n            else if (KEY_CODES[event.keyCode] == 'LEFT') {\n                this.prev();\n            }\n            else if ((KEY_CODES[event.keyCode] == 'ESC') && this.conf.closeOnEsc) {\n                this.close();\n            }\n        }\n    }\n\n    // window resize event\n    @HostListener('window:resize', ['$event'])\n    public onWindowResize(event: Event) {\n        if (this.opened && !this.loading) {\n            this.fitThumbnails();\n            setTimeout(() => this.scrollThumbnails(), 300);\n        }\n    }\n\n    /***************************************************/\n\n    // open gallery\n    open(index: number = 0) {\n        if (this.images.length) {\n            this.opened = true;\n\n            // emit event\n            this.onOpen.emit(index);\n\n            // activate image at given index\n            this.activateImage(index);\n        }\n        else {\n            console.warn('No images provided to ngx-image-gallery!');\n        }\n    }\n\n    // close gallery\n    close() {\n        this.opened = false;\n        this.activeImageIndex = 0;\n\n        // emit event\n        this.onClose.emit();\n    }\n\n    // change prev image\n    prev() {\n        if (this.onFirstImage == false) {\n            this.activateImage(this.activeImageIndex - 1);\n        }\n    }\n\n    // change next image\n    next() {\n        if (this.onLastImage == false) {\n            this.activateImage(this.activeImageIndex + 1);\n        }\n    }\n\n    // set image (activate)\n    setActiveImage(index: number) {\n        this.activateImage(index);\n    }\n\n    // delete image\n    deleteImage(index: number) {\n        this.onDelete.emit(index);\n    }\n\n    // mouse wheel up (prev image)\n    mouseWheelUp() {\n        if (this.conf.reactToMouseWheel) {\n            this.debouncedNext();\n        }\n    }\n\n    // mouse wheel down (next image)\n    mouseWheelDown() {\n        if (this.conf.reactToMouseWheel) {\n            this.debouncedPrev();\n        }\n    }\n\n    // click on image\n    clickOnImage(index: number) {\n        this.onImageClicked.emit(index);\n    }\n\n    // right click on image\n    rightClickOnImage(event: Event) {\n        event.stopPropagation();\n        return this.conf.reactToRightClick;\n    }\n\n}\n","import { Directive, ElementRef, Output, EventEmitter, HostListener } from '@angular/core';\n\n@Directive({\n  selector: '[clickOutside]'\n})\nexport class ClickOutsideDirective {\n  @Output() clickOutside: EventEmitter<any> = new EventEmitter();\n\n  constructor(private _elementRef: ElementRef) {}\n\n  @HostListener('document:click', ['$event', '$event.target'])\n  public onClick($event, targetElement) {\n    const isClickedInside = this._elementRef.nativeElement.contains(targetElement);\n    if (!isClickedInside) {\n      this.clickOutside.emit($event);\n    }\n  }\n}","import { Directive, Output, HostListener, EventEmitter } from '@angular/core';\n\n@Directive({ selector: '[mouseWheel]' })\nexport class MouseWheelDirective {\n  @Output() mouseWheelUp = new EventEmitter();\n  @Output() mouseWheelDown = new EventEmitter();\n\n  @HostListener('mousewheel', ['$event']) onMouseWheelChrome(event: any) {\n    this.mouseWheelFunc(event);\n  }\n\n  @HostListener('DOMMouseScroll', ['$event']) onMouseWheelFirefox(event: any) {\n    this.mouseWheelFunc(event);\n  }\n\n  @HostListener('onmousewheel', ['$event']) onMouseWheelIE(event: any) {\n    this.mouseWheelFunc(event);\n  }\n\n  mouseWheelFunc(event: any) {\n    var event = window.event || event; // old IE support\n    var delta = Math.max(-1, Math.min(1, (event.wheelDelta || -event.detail)));\n    if(delta > 0) {\n        this.mouseWheelUp.emit(event);\n    } else if(delta < 0) {\n        this.mouseWheelDown.emit(event);\n    }\n    // for IE\n    event.returnValue = false;\n    // for Chrome and Firefox\n    if(event.preventDefault) {\n        event.preventDefault();\n    }\n  }\n}","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\n\nimport {NgxImageGalleryComponent} from './components/ngx-image-gallery/ngx-image-gallery.component';\nimport {ClickOutsideDirective} from './directives/click-outside.directive';\nimport {MouseWheelDirective} from './directives/mousewheel.directive';\n\nexport * from './components/ngx-image-gallery/ngx-image-gallery.component';\nexport * from './directives/click-outside.directive';\nexport * from './directives/mousewheel.directive';\nexport * from './ngx-image-gallery.conf';\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        NgxImageGalleryComponent,\n        MouseWheelDirective,\n        ClickOutsideDirective\n    ],\n    exports: [\n        NgxImageGalleryComponent,\n        MouseWheelDirective,\n        ClickOutsideDirective\n    ]\n})\nexport class NgxImageGalleryModule {\n}\n"]}